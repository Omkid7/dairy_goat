{% load leaflet_tags %}
{% leaflet_map "detailmap" callback="window.map_init" %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>map</title>
    <style>
        .leaflet-container { height: 150%; }
            
             
       </style>
       <script>
        var dataurl = '{% url "data" %}';
      
        window.addEventListener("map:init", function (event) {
          var map = event.detail.map;
          // Download GeoJSON data with Ajax
          fetch(dataurl)
            .then(function(resp) {
              return resp.json();
            })
            .then(function(data) {
              L.geoJson(data, {
                onEachFeature: function onEachFeature(feature, layer) {
                  var props = feature.properties;
                  var content = `<img width="300" src="${props.picture_url}"/><h3>${props.title}</h3><p>${props.description}</p>`;
                  layer.bindPopup(content);
              }}).addTo(map);
            });
        });
      </script>
    {% leaflet_js %}
    {% leaflet_css %}
</head>
<body>

    <div class="row">

      
        <div class="col-lg-12">
            <h3>Kennel Location</h3>
            {% leaflet_map "main" callback="window.map_init_basic" %}
        </div>

    </div>
    
</body>
</html>